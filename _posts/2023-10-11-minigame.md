---
layout: post
title: Freeplay Minigame!
description: Jump with Link!
author: Katelyn Gelle, Gabriel Gravin, Kaden Vo, Daisy Zhang
courses: {'compsci': {'week': 6}}
type: hacks
comments: True
---

**Directions**  
Freeplay with Link! Use the right arrow to make him move right, use the left arrow to make him move left, and use the space bar to jump.  

<!DOCTYPE html>
<html>
<head>
    <title>Freeplay Minigame!</title>
</head>
<body>
    <canvas id="gameCanvas" width="800" height="400"></canvas>
    <script>
        // Get the canvas and its 2D rendering context
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        // Load the background image
        const backgroundImage = new Image();
        backgroundImage.src = '/student/images/park.jpg';

        // Load the sprite image for jumping
        const jumpSpriteImage = new Image();
        jumpSpriteImage.src = '/student/images/jump-sprites.png';

        // Load the sprite image for moving right
        const moveRightSpriteImage = new Image();
        moveRightSpriteImage.src = '/student/images/move-right-sprites.png';

        // Define sprite properties
        const spriteWidth = 96; // Width of a single sprite frame
        const spriteHeight = 104; // Height of a single sprite frame
        let currentFrame = 0; // Current frame index
        let frameCount = 3; // Total number of frames in the sprite sheet

        // Initial sprite position and velocity
        let spriteX = 100;
        let spriteY = canvas.height - spriteHeight;
        let spriteVelocityY = 0;
        let spriteVelocityX = 0; // Velocity for horizontal movement

        // Constants for jump behavior
        const gravity = 0.5;
        const jumpStrength = -10;
        let isJumping = false;

        // Function to update sprite animation
        function updateSpriteAnimation() {
            currentFrame = (currentFrame + 1) % frameCount;
        }

        // Function to handle jumping when spacebar is pressed
        function jump() {
            if (!isJumping) {
                spriteVelocityY = jumpStrength;
                isJumping = true;
            }
        }

        // Function to handle moving right
        function moveRight() {
            spriteVelocityX = 2; // Adjust the horizontal velocity as needed
            // You can set sprite coordinates for the move-right sprite here
            // spriteX = 4;
            // spriteY = 7;
        }

        // Event listeners for spacebar key press and right arrow key press
        window.addEventListener('keydown', (event) => {
            if (event.key === ' ') {
                jump();
            } else if (event.key === 'ArrowRight') {
                moveRight();
            }
        });

        // Game loop
        function gameLoop() {
            // Clear the canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw the background image
            ctx.drawImage(backgroundImage, 0, 0, canvas.width, canvas.height);

            // Update the sprite position based on gravity and horizontal velocity
            spriteVelocityY += gravity;
            spriteY += spriteVelocityY;
            spriteX += spriteVelocityX;

            // Check if the sprite has landed
            if (spriteY >= canvas.height - spriteHeight) {
                spriteY = canvas.height - spriteHeight;
                spriteVelocityY = 0;
                isJumping = false;
            }

            // Draw the current sprite frame based on the sprite image
            const currentSpriteImage = isJumping ? jumpSpriteImage : moveRightSpriteImage;
            ctx.drawImage(
                currentSpriteImage,
                currentFrame * spriteWidth,
                0,
                spriteWidth,
                spriteHeight,
                spriteX,
                spriteY,
                spriteWidth,
                spriteHeight
            );

            // Update sprite animation
            updateSpriteAnimation();

            requestAnimationFrame(gameLoop);
        }

        // Start the game loop
        gameLoop();
    </script>
</body>
</html>
